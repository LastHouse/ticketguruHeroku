{"version":3,"sources":["utils/AuthContext.js","components/Header.js","pages/Home.js","pages/Events.js","components/ReadTicket.js","components/TicketStatus.js","pages/Tickets.js","components/ReadQr.js","pages/TicketReader.js","routes/PrivateRoute.js","routes/PrivateRouter.js","pages/Login.js","routes/PublicRouter.js","pages/Unauthorized.js","routes/Router.js","App.js","serviceWorker.js","index.js"],"names":["AuthContext","createContext","initialState","isAuthenticated","name","token","authReducer","state","action","type","localStorage","setItem","JSON","stringify","payload","clear","AuthProvider","props","useReducer","authData","auth","dispatch","Provider","value","useAuthContext","useContext","useStyles","makeStyles","theme","root","flexGrow","menuButton","paddingTop","spacing","marginRight","toolbar","alignItems","paddingBottom","backgroundColor","color","title","display","breakpoints","up","list","width","fab","margin","Header","side","classes","useState","setTitle","React","top","left","bottom","right","drawerState","setDrawerState","toggleDrawer","open","event","key","onItemClick","className","AppBar","position","Toolbar","IconButton","edge","aria-label","onClick","Drawer","onClose","role","onKeyDown","List","Divider","ListItem","button","component","Link","to","ListItemIcon","ListItemText","Typography","variant","Button","padding","textAlign","alignContent","Home","gutterBottom","text","paddingRight","paddingLeft","elevation","palette","secondary","table","minWidth","events","isFetching","hasError","reducer","Events","useEffect","fetch","headers","Authorization","then","res","ok","json","resJson","_embedded","catch","error","console","log","Grid","container","direction","justify","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","map","row","scope","format","dateTime","ticketCapacity","info","ReadTicket","setOpen","checkSum","ticketStatus","ticket","setTicket","handleClose","Tooltip","Dialog","aria-labelledby","DialogTitle","id","DialogContent","bgColor","fgColor","level","style","_links","self","href","method","body","err","DialogActions","TicketStatus","status","setStatus","fetchStatus","response","data","DialogContentText","tickets","isTicketSubmitting","songHasError","Tickets","columns","sortable","filterable","accessor","Cell","original","flexDirection","justifyContent","invalid","moment","SubComponent","Input","defaultValue","size","ReadQr","result","setState","validateTicket","delay","onError","onScan","TicketReader","PrivateRoute","Component","rest","render","pathname","PrivateRouter","path","from","exact","Copyright","Date","getFullYear","paper","marginTop","avatar","main","form","submit","Login","history","useHistory","username","password","isSubmitting","errorMessage","user","setUser","handleInputChange","e","target","Container","maxWidth","CssBaseline","Avatar","TextField","required","fullWidth","label","autoComplete","autoFocus","onChange","disabled","preventDefault","requestOptions","Accept","authorization","message","statusText","push","item","xs","Box","mt","PublicRouter","Unauthorized","Router","App","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ac26ab66.chunk.js","sourcesContent":["import React, { createContext, useReducer, useContext } from 'react';\n\nexport const AuthContext = createContext();\n\nconst initialState = {\n  isAuthenticated: false,\n  name: null,\n  token: null\n};\n\n// Actions\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\nexport const LOGOUT = 'LOGOUT';\n\n// Action creators\nexport function loginSuccess(name) {\n  return { type: LOGIN_SUCCESS, name };\n}\n\nexport function loginFail(error) {\n  return { type: LOGIN_FAIL, error };\n}\n\nexport function logout() {\n  return { type: LOGOUT };\n}\n\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_SUCCESS':\n      localStorage.setItem('name', JSON.stringify(action.payload.name));\n      localStorage.setItem('token', JSON.stringify(action.payload.token));\n      return {\n        ...state,\n        isAuthenticated: true,\n        name: action.payload.name,\n        token: action.payload.token\n      };\n    case 'LOGIN_FAIL':\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        name: null\n      };\n    case 'LOGOUT':\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        name: null\n      };\n    default:\n      return state;\n  }\n};\n\nfunction AuthProvider(props) {\n  const [auth, dispatch] = useReducer(authReducer, initialState);\n\n  const authData = { auth, dispatch };\n\n  return <AuthContext.Provider value={authData} {...props} />;\n}\n\nfunction useAuthContext() {\n  return useContext(AuthContext);\n}\n\nexport { AuthProvider, useAuthContext };\n","import React, { useState } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport { useAuthContext, logout } from '../utils/AuthContext';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport LooksOneIcon from '@material-ui/icons/LooksOne';\nimport LooksTwoIcon from '@material-ui/icons/LooksTwo';\nimport Looks3Icon from '@material-ui/icons/Looks3';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  menuButton: {\n    paddingTop: theme.spacing(2),\n    marginRight: theme.spacing(2)\n  },\n  toolbar: {\n    alignItems: 'flex-start',\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    backgroundColor: '#d3d3d3',\n    color: 'black'\n  },\n  title: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    alignItems: 'flex-start',\n    flexGrow: 1,\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  list: {\n    width: 250\n  },\n  fab: {\n    margin: theme.spacing(1)\n  }\n}));\n\nconst Header = () => {\n  const { auth, dispatch } = useAuthContext();\n  const classes = useStyles();\n  const [title, setTitle] = useState('home');\n  const [drawerState, setDrawerState] = React.useState({\n    top: false,\n    left: false,\n    bottom: false,\n    right: false\n  });\n\n  const toggleDrawer = (side, open) => event => {\n    if (\n      event.type === 'keydown' &&\n      (event.key === 'Tab' || event.key === 'Shift')\n    ) {\n      return;\n    }\n\n    setDrawerState({ ...drawerState, [side]: open });\n  };\n\n  const onItemClick = title => () => {\n    setTitle(title);\n  };\n\n  const sideList = side => (\n    <div\n      className={classes.list}\n      role=\"presentation\"\n      onClick={toggleDrawer(side, false)}\n      onKeyDown={toggleDrawer(side, false)}\n    >\n      <List>\n        <Divider />\n\n        <ListItem\n          button\n          component={Link}\n          to=\"/app/home\"\n          onClick={onItemClick('home')}\n        >\n          <ListItemIcon>\n            <LooksOneIcon />\n          </ListItemIcon>\n          <ListItemText>Home</ListItemText>\n        </ListItem>\n\n        <ListItem\n          button\n          component={Link}\n          to=\"/app/tickets\"\n          onClick={onItemClick('tickets')}\n        >\n          <ListItemIcon>\n            <LooksTwoIcon />\n          </ListItemIcon>\n          <ListItemText>Tickets</ListItemText>\n        </ListItem>\n\n        <ListItem\n          button\n          component={Link}\n          to=\"/app/events\"\n          onClick={onItemClick('events')}\n        >\n          <ListItemIcon>\n            <Looks3Icon />\n          </ListItemIcon>\n          <ListItemText>Events</ListItemText>\n        </ListItem>\n\n        <ListItem\n          button\n          component={Link}\n          to=\"/app/ticketreader\"\n          onClick={onItemClick('Ticket Reader')}\n        >\n          <ListItemIcon>\n            <Looks3Icon />\n          </ListItemIcon>\n          <ListItemText>Ticket Reader</ListItemText>\n        </ListItem>\n      </List>\n      <Divider />\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          {auth.isAuthenticated ? (\n            <IconButton\n              edge=\"start\"\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={toggleDrawer('left', true)}\n            >\n              <MenuIcon />\n            </IconButton>\n          ) : null}\n\n          <Drawer open={drawerState.left} onClose={toggleDrawer('left', false)}>\n            {sideList('left')}\n          </Drawer>\n          <Typography variant=\"h6\" className={classes.title}>\n            TicketGuru\n          </Typography>\n          <div>\n            {' '}\n            {auth.isAuthenticated ? (\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={() => dispatch(logout())}\n              >\n                Logout\n              </Button>\n            ) : null}\n          </div>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\nexport default Header;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    textAlign: 'center',\n    alignContent: 'strech'\n  }\n}));\n\nexport default function Home() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"h1\" component=\"h2\" gutterBottom>\n        Tervetuloa!\n      </Typography>\n      <Typography variant=\"h5\" gutterBottom>\n        Tämä on aivan käsittämättömän upea TicketGuru UI.\n      </Typography>\n      <Divider />\n      <Typography variant=\"body1\" gutterBottom>\n        <br></br>\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos\n        blanditiis tenetur unde suscipit, quam beatae rerum inventore\n        consectetur, neque doloribus, cupiditate numquam dignissimos laborum\n        fugiat deleniti? Eum quasi quidem quibusdam.\n      </Typography>\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { useAuthContext } from '../utils/AuthContext';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    textAlign: 'center',\n  },\n  text: {\n    paddingRight: theme.spacing(4),\n    paddingLeft: theme.spacing(4),\n    paddingBottom: theme.spacing(2),\n    elevation: 0,\n    spacing: 4,\n    alignContent: 'stretch',\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  table: {\n    minWidth: 650,\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\nconst initialState = {\n  events: [],\n  isFetching: false,\n  hasError: false,\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_EVENTS_REQUEST':\n      return {\n        ...state,\n        isFetching: true,\n        hasError: false,\n      };\n    case 'FETCH_EVENTS_SUCCESS':\n      return {\n        ...state,\n        isFetching: false,\n        events: action.payload,\n      };\n    case 'FETCH_EVENTS_FAILURE':\n      return {\n        ...state,\n        hasError: true,\n        isFetching: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const Events = () => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const classes = useStyles();\n  const { auth } = useAuthContext();\n\n  React.useEffect(() => {\n    dispatch({\n      type: 'FETCH_EVENTS_REQUEST',\n    });\n    fetch('https://rbmk-ticketguru-backend.herokuapp.com/api/events', {\n      headers: {\n        Authorization: `Bearer ${auth.token}`,\n      },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          throw res;\n        }\n      })\n      .then((resJson) => {\n        //console.log(resJson._embedded.events);\n        dispatch({\n          type: 'FETCH_EVENTS_SUCCESS',\n          payload: resJson._embedded.events,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: 'FETCH_EVENTS_FAILURE',\n        });\n      });\n  }, [auth.token]);\n\n  return (\n    <div className=\"events\">\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        alignItems=\"flex-start\"\n      >\n        <div className={classes.text}>\n          <h2>Events</h2>\n        </div>\n        <Divider />\n\n        {state.isFetching ? (\n          <div className=\"loader\">LOADING...</div>\n        ) : state.hasError ? (\n          <div className=\"error\">AN ERROR HAS OCCURED</div>\n        ) : (\n          <>\n            <TableContainer>\n              <Table className={classes.table}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell align=\"center\">Name</TableCell>\n                    <TableCell align=\"center\">Date</TableCell>\n                    <TableCell align=\"center\">Ticket Capacity</TableCell>\n                    <TableCell align=\"center\">Info</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {state.events.map((row) => (\n                    <TableRow key={row.name}>\n                      <TableCell align=\"center\" component=\"th\" scope=\"row\">\n                        {row.name}\n                      </TableCell>\n\n                      <TableCell align=\"center\">\n                        <Moment format=\"DD/MM/YYYY  HH:mm\">\n                          {row.dateTime}\n                        </Moment>\n                      </TableCell>\n                      <TableCell align=\"center\">{row.ticketCapacity}</TableCell>\n                      <TableCell align=\"center\">{row.info}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </>\n        )}\n      </Grid>\n    </div>\n  );\n};\nexport default Events;\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport SelectAllIcon from '@material-ui/icons/SelectAll';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { QRCode } from 'react-qr-svg';\nimport { useAuthContext } from '../utils/AuthContext';\n\nexport default function ReadTicket(props) {\n  const { auth } = useAuthContext();\n  const [open, setOpen] = useState(false);\n\n  const [ticket, setTicket] = useState({\n    checkSum: '',\n    ticketStatus: ''\n  });\n\n  const handleClickOpen = () => {\n    setTicket({\n      checkSum: props.ticket.checkSum\n    });\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const markUsed = () => {\n    fetch(props.ticket._links.self.href, {\n      method: 'PATCH',\n      headers: {\n        Authorization: `Bearer ${auth.token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ticketStatus: 'http://localhost:8080/api/ticketStatuses/2'\n      })\n    }).catch(err => console.error(err));\n  };\n\n  return (\n    <div>\n      <Tooltip title=\"Read\">\n        <IconButton onClick={() => handleClickOpen()}>\n          <SelectAllIcon />\n        </IconButton>\n      </Tooltip>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Read Ticket</DialogTitle>\n        <DialogContent>\n          <QRCode\n            bgColor=\"#FFFFFF\"\n            fgColor=\"#000000\"\n            level=\"Q\"\n            style={{ width: 256 }}\n            value={ticket.checkSum}\n          />\n        </DialogContent>\n\n        <DialogContent>\n          <Button variant=\"contained\" color=\"secondary\" onClick={markUsed}>\n            Mark as Used\n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Exit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport AnnouncementIcon from '@material-ui/icons/Announcement';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { useAuthContext } from '../utils/AuthContext';\nimport DialogContentText from '@material-ui/core/DialogContentText';\n\nexport default function TicketStatus(props) {\n  const { auth } = useAuthContext();\n  const [open, setOpen] = useState(false);\n\n  const [status, setStatus] = useState([]);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n    fetchStatus();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const fetchStatus = () => {\n    fetch(props.ticket._links.ticketStatus.href, {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    })\n      .then(response => response.json())\n      .then(data => setStatus(data));\n  };\n\n  return (\n    <div>\n      <Tooltip title=\"Status\">\n        <IconButton onClick={() => handleClickOpen()}>\n          <AnnouncementIcon />\n        </IconButton>\n      </Tooltip>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Ticket Status</DialogTitle>\n\n        <DialogContent>\n          <DialogContentText> {status.name}</DialogContentText>\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Exit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useAuthContext } from '../utils/AuthContext';\nimport ReactTable from 'react-table';\nimport 'react-table/react-table.css';\nimport moment from 'moment/moment.js';\nimport ReadTicket from '../components/ReadTicket';\nimport TicketStatus from '../components/TicketStatus';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Input from '@material-ui/core/Input';\n\nexport const TicketContext = React.createContext();\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    textAlign: 'center',\n  },\n}));\n\nconst initialState = {\n  tickets: [],\n  isFetching: false,\n  hasError: false,\n  isTicketSubmitting: false,\n  songHasError: false,\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_TICKETS_REQUEST':\n      return {\n        ...state,\n        isFetching: true,\n        hasError: false,\n      };\n    case 'FETCH_TICKETS_SUCCESS':\n      return {\n        ...state,\n        isFetching: false,\n        tickets: action.payload,\n      };\n    case 'FETCH_TICKETS_FAILURE':\n      return {\n        ...state,\n        hasError: true,\n        isFetching: false,\n      };\n    case 'PATCH_TICKET_REQUEST':\n      return {\n        ...state,\n        isTicketSubmitting: true,\n        songHasError: false,\n      };\n    case 'PATCH_TICKET_SUCCESS':\n      return {\n        ...state,\n        isTicketSubmitting: false,\n        tickets: [...state.tickets, action.payload],\n      };\n    case 'PATCH_TICKET_FAILURE':\n      return {\n        ...state,\n        isTicketSubmitting: false,\n        songHasError: true,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const Tickets = () => {\n  const { auth } = useAuthContext();\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const classes = useStyles();\n\n  useEffect(() => {\n    dispatch({\n      type: 'FETCH_TICKETS_REQUEST',\n    });\n    fetch('https://rbmk-ticketguru-backend.herokuapp.com/api/tickets', {\n      headers: {\n        Authorization: `Bearer ${auth.token}`,\n      },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          throw res;\n        }\n      })\n      .then((resJson) => {\n        console.log(resJson._embedded.tickets);\n        dispatch({\n          type: 'FETCH_TICKETS_SUCCESS',\n          payload: resJson._embedded.tickets,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: 'FETCH_TICKETS_FAILURE',\n        });\n      });\n  }, [auth.token]);\n\n  const columns = [\n    {\n      Header: '',\n      sortable: false,\n      filterable: false,\n      width: 60,\n      accessor: '_links.self.href',\n      Cell: (row) => <ReadTicket ticket={row.original} />,\n    },\n    {\n      Header: 'Checksum',\n      accessor: 'checkSum',\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n      },\n    },\n    {\n      id: 'invalid',\n      Header: 'Invalidated',\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n      },\n      accessor: (row) =>\n        row.invalid === null\n          ? ''\n          : moment(row.invalid).format('DD/MM/YYYY  HH:mm'),\n    },\n    {\n      Header: '',\n      sortable: false,\n      filterable: false,\n      width: 60,\n      accessor: '_links.ticketStatus.href',\n      Cell: (row) => <TicketStatus ticket={row.original} />,\n    },\n  ];\n\n  return (\n    <div className={classes.root}>\n      {state.isFetching ? (\n        <span className=\"loader\">LOADING...</span>\n      ) : state.hasError ? (\n        <span className=\"error\">AN ERROR HAS OCCURED</span>\n      ) : (\n        <ReactTable\n          filterable={false}\n          data={state.tickets}\n          columns={columns}\n          SubComponent={(row) => {\n            return (\n              <div>\n                <Input\n                  align=\"center\"\n                  type=\"number\"\n                  id=\"quantity\"\n                  name=\"quantity\"\n                  defaultValue=\"1\"\n                />\n                <Button size=\"small\" variant=\"contained\" color=\"primary\">\n                  Testi\n                </Button>\n              </div>\n            );\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Tickets;\n","import React, { useState } from 'react';\nimport QrReader from 'react-qr-reader';\nimport { useAuthContext } from '../utils/AuthContext';\n\nexport default function ReadQr() {\n  const { auth } = useAuthContext();\n  const [state, setState] = useState({\n    result: 'No result',\n  });\n\n  const handleScan = (data) => {\n    if (data) {\n      setState({\n        result: data,\n      });\n      validateTicket();\n    }\n  };\n\n  const handleError = (err) => {\n    console.error(err);\n  };\n\n  const validateTicket = () => {\n    fetch(\n      `https://rbmk-ticketguru-backend.herokuapp.com/api/tickets/validate/${state.result}`,\n      {\n        headers: {\n          Authorization: `Bearer ${auth.token}`,\n        },\n      }\n    )\n      .then((response) => response.json())\n      .then((data) => console.log(data));\n  };\n\n  return (\n    <div>\n      <QrReader\n        delay={300}\n        onError={handleError}\n        onScan={handleScan}\n        style={{ width: 500 }}\n      />\n      <h4>{state.result}</h4>\n    </div>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport ReadrQr from '../components/ReadQr';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    textAlign: 'center',\n    alignContent: 'strech'\n  }\n}));\n\nexport default function TicketReader() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"h1\" component=\"h2\" gutterBottom>\n        Lue lippusi\n      </Typography>\n      <ReadrQr />\n      <Divider />\n    </div>\n  );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useAuthContext } from '../utils/AuthContext';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const { auth } = useAuthContext();\n\n  return (\n    <Route\n      {...rest}\n      render={({ props }) =>\n        auth.isAuthenticated ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={{ pathname: '/auth' }} />\n        )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import React from 'react';\nimport Home from '../pages/Home';\nimport Events from '../pages/Events';\nimport Tickets from '../pages/Tickets';\nimport TicketReader from '../pages/TicketReader';\nimport PrivateRoute from './PrivateRoute';\nimport { Redirect } from 'react-router-dom';\n\nconst PrivateRouter = () => {\n  return (\n    <div>\n      <PrivateRoute path=\"/app/home\" component={Home} />\n      <PrivateRoute path=\"/app/events\" component={Events} />\n      <PrivateRoute path=\"/app/tickets\" component={Tickets} />\n      <PrivateRoute path=\"/app/ticketreader\" component={TicketReader} />\n      <Redirect from=\"/app\" to=\"/app/home\" exact />\n    </div>\n  );\n};\n\nexport default PrivateRouter;\n","import React, { useState, useContext } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport { useHistory } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from '../utils/AuthContext';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" to=\"#\">\n        TicketGuru\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport const Login = () => {\n  const { dispatch } = useContext(AuthContext);\n  let history = useHistory();\n  const classes = useStyles();\n  const [user, setUser] = useState({\n    username: '',\n    password: '',\n    isSubmitting: false,\n    errorMessage: null,\n  });\n\n  const handleInputChange = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  function handleFormSubmit(e) {\n    e.preventDefault();\n    setUser({\n      ...user,\n      isSubmitting: true,\n      errorMessage: null,\n    });\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        authorization: 'jwt',\n      },\n      body: JSON.stringify({\n        username: user.username,\n        password: user.password,\n      }),\n    };\n\n    fetch(\n      'https://rbmk-ticketguru-backend.herokuapp.com/api/login',\n      requestOptions\n    )\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        throw res;\n      })\n      .then((resJson) => {\n        dispatch({\n          type: 'LOGIN_SUCCESS',\n          payload: resJson,\n        });\n      })\n      .catch((error) => {\n        setUser({\n          ...user,\n          isSubmitting: false,\n          errorMessage: error.message || error.statusText,\n        });\n      });\n    history.push('/app/home');\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        <form className={classes.form}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            label=\"User Name\"\n            name=\"username\"\n            autoComplete=\"username\"\n            autoFocus\n            onChange={handleInputChange}\n            value={user.username}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            onChange={handleInputChange}\n            value={user.password}\n          />\n\n          {user.errorMessage && (\n            <span className=\"form-error\">{user.errorMessage}</span>\n          )}\n\n          <Button\n            disabled={user.isSubmitting}\n            fullWidth\n            href=\"/home\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={handleFormSubmit}\n          >\n            {user.isSubmitting ? 'Loading...' : 'Login'}\n          </Button>\n\n          <Grid container>\n            <Grid item xs>\n              <Typography variant=\"body2\" align=\"center\">\n                <Link to=\"#\" variant=\"body2\">\n                  Forgot password?\n                </Link>\n              </Typography>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n};\nexport default Login;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport Login from '../pages/Login';\n\nconst PublicRouter = () => {\n  return (\n    <div>\n      <Route exact path=\"/auth/login\" component={Login} />\n      <Redirect from=\"/auth\" to=\"/auth/login\" exact />\n    </div>\n  );\n};\n\nexport default PublicRouter;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../Unauthorized.scss';\n\nconst Unauthorized = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"gandalf\">\n        <div className=\"fireball\"></div>\n        <div className=\"skirt\"></div>\n        <div className=\"sleeves\"></div>\n        <div className=\"shoulders\">\n          <div className=\"hand left\"></div>\n          <div className=\"hand right\"></div>\n        </div>\n        <div className=\"head\">\n          <div className=\"hair\"></div>\n          <div className=\"beard\"></div>\n        </div>\n      </div>\n      <div className=\"message\">\n        <h1>403 - You Shall Not Pass</h1>\n        <p>\n          Uh oh, Gandalf is blocking the way!\n          <br />\n          Maybe you have a typo in the url? Or you meant to go to a different\n          location? Like...Hobbiton?\n        </p>\n      </div>\n      <p>\n        <Link to=\"/auth\">Back to Home</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default Unauthorized;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport PrivateRouter from './PrivateRouter';\nimport PublicRouter from './PublicRouter';\nimport Unauthorized from '../pages/Unauthorized';\n\nconst Router = () => {\n  return (\n    <div>\n      <Switch>\n        <Route path=\"/app\" component={PrivateRouter} />\n        <Route path=\"/auth\" component={PublicRouter} />\n        <Route component={Unauthorized} />\n      </Switch>\n    </div>\n  );\n};\n\nexport default Router;\n","import React from 'react';\nimport './App.css';\nimport { AuthProvider } from './utils/AuthContext';\nimport { BrowserRouter } from 'react-router-dom';\nimport Header from './components/Header';\nimport Router from './routes/Router';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <Header />\n        <Router />\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'typeface-roboto';\n\nReactDOM.render(\n  <App />,\n\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}